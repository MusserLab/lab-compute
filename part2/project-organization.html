<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Project Organization – Data Analysis in the Musser Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../part2/quarto.html" rel="next">
<link href="../part2/positron.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-8b4baf804e461d9b72633f0de59a0cac.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-f1aadacce99040138bbb613f9330654f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-8b4baf804e461d9b72633f0de59a0cac.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-968d3e63a93d5987d0e6d73d568971dd.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-913b17780ec437ee198ef3e682b8cc2c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-968d3e63a93d5987d0e6d73d568971dd.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part2/positron.html">Core Tools</a></li><li class="breadcrumb-item"><a href="../part2/project-organization.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Project Organization</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Data Analysis in the Musser Lab</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Quick Start</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part1/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part1/installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part1/first-project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Your First R Project</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Core Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part2/positron.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Positron</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part2/project-organization.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Project Organization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part2/quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part2/renv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">R: rig &amp; renv</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part2/conda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Conda</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part2/git-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Git &amp; GitHub</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Working with AI</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../claude-code/ai-fluency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">AI Fluency</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../claude-code/getting-started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Getting Started with Claude Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../claude-code/teaching-claude.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Teaching Claude About Your Work</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../claude-code/working-effectively.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Working Effectively with Claude</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../claude-code/musser-lab-toolkit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">The Musser Lab Toolkit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../claude-code/staying-safe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Staying Safe</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Workflows</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part3/setup-walkthrough.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Setting Up a Lab Project</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part3/starting-project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Quick Reference: Project Setup</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part3/collaborating.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Collaborating with Others</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part3/reproducibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reproducible Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part3/troubleshooting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Common Tasks &amp; Troubleshooting</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/shortcuts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Keyboard Shortcuts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/commands.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Command Reference</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/templates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Templates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/r-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">R Packages for Biology</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/lab-skills.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Lab Skills Reference</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-two-rules" id="toc-the-two-rules" class="nav-link active" data-scroll-target="#the-two-rules"><span class="header-section-number">5.1</span> The Two Rules</a></li>
  <li><a href="#anatomy-of-a-lab-project" id="toc-anatomy-of-a-lab-project" class="nav-link" data-scroll-target="#anatomy-of-a-lab-project"><span class="header-section-number">5.2</span> Anatomy of a Lab Project</a></li>
  <li><a href="#data-directory" id="toc-data-directory" class="nav-link" data-scroll-target="#data-directory"><span class="header-section-number">5.3</span> data/ — Your Inputs Are Sacred</a></li>
  <li><a href="#scripts-directory" id="toc-scripts-directory" class="nav-link" data-scroll-target="#scripts-directory"><span class="header-section-number">5.4</span> scripts/ — Numbered Analysis Scripts</a>
  <ul class="collapse">
  <li><a href="#why-.qmd-files" id="toc-why-.qmd-files" class="nav-link" data-scroll-target="#why-.qmd-files"><span class="header-section-number">5.4.1</span> Why .qmd Files?</a></li>
  <li><a href="#why-numbers" id="toc-why-numbers" class="nav-link" data-scroll-target="#why-numbers"><span class="header-section-number">5.4.2</span> Why Numbers?</a></li>
  </ul></li>
  <li><a href="#outs-directory" id="toc-outs-directory" class="nav-link" data-scroll-target="#outs-directory"><span class="header-section-number">5.5</span> outs/ — Provenance Through Structure</a>
  <ul class="collapse">
  <li><a href="#build_info.txt" id="toc-build_info.txt" class="nav-link" data-scroll-target="#build_info.txt"><span class="header-section-number">5.5.1</span> BUILD_INFO.txt</a></li>
  <li><a href="#setting-up-output-paths" id="toc-setting-up-output-paths" class="nav-link" data-scroll-target="#setting-up-output-paths"><span class="header-section-number">5.5.2</span> Setting Up Output Paths</a></li>
  </ul></li>
  <li><a href="#dependencies" id="toc-dependencies" class="nav-link" data-scroll-target="#dependencies"><span class="header-section-number">5.6</span> How Scripts Connect</a></li>
  <li><a href="#exploratory" id="toc-exploratory" class="nav-link" data-scroll-target="#exploratory"><span class="header-section-number">5.7</span> The Exploratory Directory</a></li>
  <li><a href="#project-layout" id="toc-project-layout" class="nav-link" data-scroll-target="#project-layout"><span class="header-section-number">5.8</span> Growing a Project: Flat vs.&nbsp;Sectioned</a>
  <ul class="collapse">
  <li><a href="#alternative-prefixes" id="toc-alternative-prefixes" class="nav-link" data-scroll-target="#alternative-prefixes"><span class="header-section-number">5.8.1</span> Alternative: Prefixes</a></li>
  <li><a href="#when-to-switch" id="toc-when-to-switch" class="nav-link" data-scroll-target="#when-to-switch"><span class="header-section-number">5.8.2</span> When to Switch</a></li>
  </ul></li>
  <li><a href="#script-lifecycle" id="toc-script-lifecycle" class="nav-link" data-scroll-target="#script-lifecycle"><span class="header-section-number">5.9</span> Script Lifecycle</a></li>
  <li><a href="#housekeeping" id="toc-housekeeping" class="nav-link" data-scroll-target="#housekeeping"><span class="header-section-number">5.10</span> Keeping Things Clean</a>
  <ul class="collapse">
  <li><a href="#naming-conventions" id="toc-naming-conventions" class="nav-link" data-scroll-target="#naming-conventions"><span class="header-section-number">5.10.1</span> Naming Conventions</a></li>
  <li><a href="#cross-language-data" id="toc-cross-language-data" class="nav-link" data-scroll-target="#cross-language-data"><span class="header-section-number">5.10.2</span> Cross-Language Data</a></li>
  <li><a href="#helper-functions" id="toc-helper-functions" class="nav-link" data-scroll-target="#helper-functions"><span class="header-section-number">5.10.3</span> Helper Functions</a></li>
  <li><a href="#version-control" id="toc-version-control" class="nav-link" data-scroll-target="#version-control"><span class="header-section-number">5.10.4</span> Version Control</a></li>
  <li><a href="#handling-old-versions" id="toc-handling-old-versions" class="nav-link" data-scroll-target="#handling-old-versions"><span class="header-section-number">5.10.5</span> Handling Old Versions</a></li>
  </ul></li>
  <li><a href="#complete-example" id="toc-complete-example" class="nav-link" data-scroll-target="#complete-example"><span class="header-section-number">5.11</span> A Complete Example</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part2/positron.html">Core Tools</a></li><li class="breadcrumb-item"><a href="../part2/project-organization.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Project Organization</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Project Organization</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Imagine opening a project you haven’t touched in six months. Or inheriting a colleague’s analysis when they leave the lab. You need to figure out: Where’s the raw data? Which script produces which output? What’s the current version of the analysis? Is that CSV file something I downloaded, or something a script generated?</p>
<p>A well-organized project answers these questions through its structure alone. You shouldn’t need to read code or ask someone—the folder layout and naming conventions should tell you what’s what. This chapter describes the conventions we use in the lab to make that possible. Every rule exists for a practical reason, and once you’ve internalized them, setting up a new project takes minutes.</p>
<p>In <a href="../part1/first-project.html">Your First R Project</a>, you created a project with <code>data/</code>, <code>scripts/</code>, and <code>outs/</code> folders. This chapter explains that structure formally and covers how it scales as projects grow.</p>
<section id="the-two-rules" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="the-two-rules"><span class="header-section-number">5.1</span> The Two Rules</h2>
<p>Every analysis project has two types of files, and the entire organizational system follows from keeping them separate:</p>
<ol type="1">
<li><p><strong>Inputs are sacred.</strong> Data that comes from outside the project—sequencing results, collaborator files, public datasets—goes in <code>data/</code> and is never modified by your scripts. If you need a cleaned version, your script reads the original, transforms it, and saves the result as an output.</p></li>
<li><p><strong>Outputs are disposable.</strong> Everything your scripts produce—processed data, figures, tables, rendered reports—goes in <code>outs/</code> and can always be regenerated by rerunning the script that created it.</p></li>
</ol>
<p>This separation is the foundation. When you know that everything in <code>data/</code> came from outside and everything in <code>outs/</code> was generated by code, you can always trace where a file came from and how to recreate it.</p>
</section>
<section id="anatomy-of-a-lab-project" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="anatomy-of-a-lab-project"><span class="header-section-number">5.2</span> Anatomy of a Lab Project</h2>
<p>Here’s what a typical lab project looks like:</p>
<pre><code>my-project/
├── .claude/              # Claude Code project config
│   └── CLAUDE.md
├── data/                 # External inputs — scripts never write here
├── scripts/              # Quarto analysis scripts (.qmd)
│   └── exploratory/      # One-off analyses
├── outs/                 # All generated outputs
├── R/                    # Shared R helper functions
├── python/               # Shared Python helper functions
├── environment.yml       # Conda environment
├── renv.lock             # R package versions
├── .gitignore
└── README.md</code></pre>
<p>If you’re using Claude Code (covered in Part 3), the <code>/new-project</code> command creates this entire structure for you — creating directories, initializing Git, setting up conda and renv, and generating a <code>.claude/CLAUDE.md</code> with your project’s conventions. But it’s worth understanding what each piece does.</p>
<p>The <code>.claude/</code> directory holds project-level configuration for Claude Code, including a <code>CLAUDE.md</code> file that describes the project’s purpose, environment, and conventions. As a project matures, you may also add planning documents here to track multi-session work. You’ll learn more about this in the <a href="../claude-code/getting-started.html">Claude Code chapters</a>.</p>
<p>Not every project needs every directory. An R-only project won’t have <code>python/</code> or <code>environment.yml</code>. A Python-only project won’t have <code>R/</code> or <code>renv.lock</code>. The <code>/new-project</code> command asks about your languages and creates only what’s needed.</p>
</section>
<section id="data-directory" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="data-directory"><span class="header-section-number">5.3</span> data/ — Your Inputs Are Sacred</h2>
<p>The <code>data/</code> folder holds files that come from <strong>outside</strong> the project—things your scripts read but never write to:</p>
<pre><code>data/
├── counts_matrix.csv          # From the sequencing core
├── sample_metadata.xlsx       # From a collaborator
├── reference_genome.fasta     # Downloaded from NCBI
└── README.md                  # Documents where each file came from</code></pre>
<p>This includes raw sequencing data from core facilities, spreadsheets from collaborators, downloaded public datasets, annotation files from databases, and metadata you received or compiled by hand.</p>
<p>The critical rule is that <strong>scripts never write to <code>data/</code></strong>. If your code produces a file, it belongs in <code>outs/</code>, not here. This rule means you can always trust that files in <code>data/</code> are the original, unmodified inputs—you never have to wonder whether something in <code>data/</code> was accidentally overwritten by a script.</p>
<p>Document where each file came from. A <code>data/README.md</code> is the simplest approach—note the source, date received, and any relevant details for each file. Six months from now, you’ll be grateful you wrote down which version of the genome annotation you downloaded, or which email attachment that metadata spreadsheet came from.</p>
</section>
<section id="scripts-directory" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="scripts-directory"><span class="header-section-number">5.4</span> scripts/ — Numbered Analysis Scripts</h2>
<p>All analysis scripts live in <code>scripts/</code>, numbered to show their logical flow:</p>
<pre><code>scripts/
├── 01_import_qc.qmd
├── 02_normalize.qmd
├── 03_differential.qmd
├── 04_volcano_plots.qmd
├── 05_heatmaps.qmd
└── exploratory/</code></pre>
<section id="why-.qmd-files" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="why-.qmd-files"><span class="header-section-number">5.4.1</span> Why .qmd Files?</h3>
<p>In the lab, all data analysis scripts are <strong>Quarto documents</strong> (<code>.qmd</code>), not plain <code>.R</code> or <code>.py</code> scripts. Quarto lets you combine code, results, and narrative explanation in a single file—so your analysis documents what it does and why as it runs. When you render a <code>.qmd</code> file, it produces an HTML report with your figures, tables, and text woven together.</p>
<p>Use <code>.py</code> files only for standalone utilities, CLI tools, or library code in <code>python/</code>. Use <code>.R</code> files only for helper functions in <code>R/</code>. The analysis itself—the thing that reads data, transforms it, produces results—is always a <code>.qmd</code>. The <a href="../part2/quarto.html">Quarto chapter</a> covers the syntax and workflow in detail.</p>
<p>Each script uses <strong>one language</strong>—either R or Python, never both in the same file. When R and Python scripts need to exchange data, they communicate through files in <code>outs/</code>, not shared memory.</p>
</section>
<section id="why-numbers" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="why-numbers"><span class="header-section-number">5.4.2</span> Why Numbers?</h3>
<p>The two-digit prefix (<code>01_</code>, <code>02_</code>, …, <code>10_</code>, <code>11_</code>) serves a simple purpose: when you run <code>ls</code> or look at the file explorer, scripts appear in the order of your analysis pipeline. Script 01 imports and cleans the data. Script 02 normalizes it. Script 03 runs differential analysis. A new lab member can glance at the file list and understand the analysis flow.</p>
<p>The numbers indicate <strong>logical order, not strict dependencies</strong>. Script 05 might read outputs from scripts 01 and 03 directly—the numbering just helps you understand the overall structure at a glance. Dependencies are encoded by the file paths each script reads, not by the numbers.</p>
<p>When you add a new script, assign the next available number. If you archive or delete a script, <strong>don’t renumber the remaining ones</strong>—leave gaps. This avoids confusion with any downstream references or documentation that mention the old numbers.</p>
</section>
</section>
<section id="outs-directory" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="outs-directory"><span class="header-section-number">5.5</span> outs/ — Provenance Through Structure</h2>
<p>Here’s the convention that makes everything traceable: <strong>every script gets a matching output folder</strong>. Script <code>01_import_qc.qmd</code> writes all its outputs to <code>outs/01_import_qc/</code>:</p>
<pre><code>outs/
├── 01_import_qc/
│   ├── filtered_counts.rds
│   ├── qc_summary.csv
│   ├── 01_import_qc.html      # Rendered report
│   └── BUILD_INFO.txt
├── 02_normalize/
│   ├── normalized_counts.rds
│   ├── 02_normalize.html
│   └── BUILD_INFO.txt
└── 03_differential/
    ├── limma_results.rds
    ├── significant_hits.csv
    ├── 03_differential.html
    └── BUILD_INFO.txt</code></pre>
<p>This structure <strong>encodes provenance automatically</strong>. When you see a file in <code>outs/03_differential/</code>, you know exactly which script created it—no need to search or guess. The rendered HTML report sits alongside the data outputs, keeping <code>scripts/</code> clean and making it easy to view results.</p>
<p><strong>Output ownership</strong> is strict: a script writes only to its own output folder, never to another script’s. If script 05 needs a modified version of something script 01 produced, it reads script 01’s output and saves its own version in <code>outs/05_whatever/</code>.</p>
<section id="build_info.txt" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="build_info.txt"><span class="header-section-number">5.5.1</span> BUILD_INFO.txt</h3>
<p>Every numbered script writes a <code>BUILD_INFO.txt</code> to its output folder as its last action:</p>
<pre><code>script: 03_differential.qmd
commit: a1b2c3d
date: 2026-02-14 15:30:00</code></pre>
<p>This answers a question that comes up constantly: “When was this output last regenerated, and from what version of the code?” If downstream plots look wrong, you can check the upstream folder’s <code>BUILD_INFO.txt</code> to see whether it was generated from current code or something stale. The <a href="../part2/quarto.html">Quarto chapter</a> has the R and Python code to generate this automatically.</p>
</section>
<section id="setting-up-output-paths" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="setting-up-output-paths"><span class="header-section-number">5.5.2</span> Setting Up Output Paths</h3>
<p>In your setup chunk, define paths that match this structure:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># This script's output folder</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>dir_out <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"outs"</span>, <span class="st">"03_differential"</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(dir_out, <span class="at">recursive =</span> <span class="cn">TRUE</span>, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Input paths</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>path_normalized <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"outs"</span>, <span class="st">"02_normalize"</span>, <span class="st">"normalized_counts.rds"</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>path_metadata <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"sample_metadata.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Then save all outputs to <code>dir_out</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save results</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(results, <span class="fu">file.path</span>(dir_out, <span class="st">"limma_results.rds"</span>))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(significant, <span class="fu">file.path</span>(dir_out, <span class="st">"significant_hits.csv"</span>))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Save figures</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">file.path</span>(dir_out, <span class="st">"volcano_plot.pdf"</span>), p, <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="dependencies" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="dependencies"><span class="header-section-number">5.6</span> How Scripts Connect</h2>
<p>Scripts read from two places: <code>data/</code> (external inputs) and <code>outs/</code> (outputs from other scripts). Dependencies between scripts are self-documenting through file paths—group all input reads at the top of each script, with comments distinguishing external data from other scripts’ outputs:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: inputs</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Inputs (from other scripts) ---</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>normalized <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">here</span>(<span class="st">"outs/02_normalize/normalized_counts.rds"</span>))</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Inputs (external data) ---</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/sample_metadata.csv"</span>))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>annotations <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="fu">here</span>(<span class="st">"data/gene_annotations.tsv"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Reading the top of any script shows exactly what it depends on and where those files come from. No separate manifest or pipeline specification needed—the dependencies are right there in the code.</p>
<p>Dependencies don’t have to be strictly linear. A plotting script might read from the original data, from an early QC script, and from a later differential analysis. Here’s what that looks like as a dependency diagram:</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    data["data/*"] --&gt; s01["01_import_qc"]
    s01 --&gt; s02["02_normalize"]
    s02 --&gt; s03["03_differential"]
    s03 --&gt; s04["04_volcano_plots"]

    s02 --&gt; s05["05_heatmaps"]
    s03 --&gt; s05
    data --&gt; s05
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Because dependencies are encoded as file paths, you can trace them with a simple search:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a># Find which script produces a file</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>grep -r "limma_results.rds" scripts/</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a># Find all scripts that depend on script 02's outputs</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>grep -r "outs/02_normalize" scripts/</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="exploratory" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="exploratory"><span class="header-section-number">5.7</span> The Exploratory Directory</h2>
<p>Not everything you write is part of the main analysis pipeline. Sometimes you need to test an idea, try a new visualization, or run a quick sanity check. That’s what <code>scripts/exploratory/</code> is for:</p>
<pre><code>scripts/
├── 01_import_qc.qmd
├── 02_normalize.qmd
├── exploratory/
│   ├── test_umap_parameters.qmd
│   └── compare_normalization.qmd</code></pre>
<p>Exploratory scripts follow relaxed rules:</p>
<ul>
<li><strong>No number prefixes</strong> or <code>BUILD_INFO.txt</code> required</li>
<li><strong>No other script depends on them</strong>—this is the critical rule. Exploratory scripts can read from any <code>outs/</code> folder, but nothing outside of <code>exploratory/</code> reads from exploratory outputs. This is a one-way dependency.</li>
<li><strong>Can be cleaned out periodically</strong> without breaking anything in the main pipeline</li>
<li><strong>Good candidates for promotion</strong>—if an exploratory analysis proves valuable, promote it to a numbered script in the main directory</li>
</ul>
<p>The one-way dependency rule is what makes the exploratory directory safe to experiment in. You can write, modify, or delete anything in there without worrying about breaking the analysis pipeline.</p>
</section>
<section id="project-layout" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="project-layout"><span class="header-section-number">5.8</span> Growing a Project: Flat vs.&nbsp;Sectioned</h2>
<p>The structure shown above is a <strong>flat layout</strong>—all scripts in one directory, one numbering sequence. This works well for small to medium projects with a single analytical thread and fewer than about ten scripts.</p>
<p>When a project grows to include multiple distinct analyses—say, phosphoproteomics and transcriptomics from the same experiment—a flat layout gets unwieldy. That’s when you switch to a <strong>sectioned layout</strong>, where scripts, data, and outputs are organized into subdirectories by analytical thread:</p>
<pre><code>project/
├── scripts/
│   ├── phosphoproteomics/
│   │   ├── 01_import_qc.qmd
│   │   ├── 02_normalize.qmd
│   │   └── 03_differential.qmd
│   ├── transcriptomics/
│   │   ├── 01_import.qmd
│   │   └── 02_pca.qmd
│   ├── combined/
│   │   └── 01_integration.qmd
│   └── exploratory/
├── data/
│   ├── phosphoproteomics/
│   └── transcriptomics/
└── outs/
    ├── phosphoproteomics/
    │   ├── 01_import_qc/
    │   ├── 02_normalize/
    │   └── 03_differential/
    ├── transcriptomics/
    │   ├── 01_import/
    │   └── 02_pca/
    └── combined/
        └── 01_integration/</code></pre>
<p>A few things to notice:</p>
<ul>
<li><strong>Numbering restarts at <code>01_</code> in each section.</strong> Each analytical thread has its own sequence.</li>
<li><strong>Data and outs mirror the section structure.</strong> <code>scripts/phosphoproteomics/</code> has a corresponding <code>data/phosphoproteomics/</code> and <code>outs/phosphoproteomics/</code>.</li>
<li><strong>Shared data</strong> that multiple sections use can live at the top level of <code>data/</code> (e.g., <code>data/gene_annotations/</code>).</li>
<li><strong>Cross-section scripts</strong> like <code>combined/01_integration.qmd</code> can read from any section’s <code>outs/</code> folder.</li>
</ul>
<p>Use <strong>descriptive names</strong> for sections—names that describe what the analysis is about (<code>phosphoproteomics</code>, <code>transcriptomics</code>, <code>figures</code>) rather than generic labels. A new lab member should be able to look at the directory names and understand the project’s scope.</p>
<section id="alternative-prefixes" class="level3" data-number="5.8.1">
<h3 data-number="5.8.1" class="anchored" data-anchor-id="alternative-prefixes"><span class="header-section-number">5.8.1</span> Alternative: Prefixes</h3>
<p>For projects with just two or three analytical threads and only a few scripts each, subdirectories can be overkill. You can use prefixes instead:</p>
<pre><code>scripts/
├── phospho_01_qc.qmd
├── phospho_02_normalize.qmd
├── trans_01_import.qmd
└── combined_01_integration.qmd</code></pre>
<p>Output folders mirror the naming: <code>outs/phospho_01_qc/</code>, <code>outs/trans_01_import/</code>, etc. Either approach works—the key is that outputs always mirror the script organization so provenance is clear.</p>
</section>
<section id="when-to-switch" class="level3" data-number="5.8.2">
<h3 data-number="5.8.2" class="anchored" data-anchor-id="when-to-switch"><span class="header-section-number">5.8.2</span> When to Switch</h3>
<p>Start flat. Switch to sectioned when you find yourself with more than about ten scripts or two distinct analytical threads competing for number slots. You don’t need to plan for sectioning from the start—restructuring a flat project into sections is straightforward because each script’s output folder moves with it.</p>
</section>
</section>
<section id="script-lifecycle" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="script-lifecycle"><span class="header-section-number">5.9</span> Script Lifecycle</h2>
<p>As an analysis evolves, scripts move through stages. Track this with a <code>status</code> field in the YAML frontmatter of each <code>.qmd</code> file:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Differential Expression"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">status</span><span class="kw">:</span><span class="at"> development</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 33%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Status</th>
<th>Meaning</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>development</code></td>
<td>In active development; outputs may change</td>
<td><code>scripts/</code></td>
</tr>
<tr class="even">
<td><code>finalized</code></td>
<td>Outputs are publication-ready; modify only with deliberate re-validation</td>
<td><code>scripts/</code></td>
</tr>
<tr class="odd">
<td><code>deprecated</code></td>
<td>Superseded by a newer script; kept for reference</td>
<td><code>scripts/old/</code></td>
</tr>
</tbody>
</table>
<p>Most scripts spend their life in <code>development</code>. When the results are solid and heading toward a paper, mark them <code>finalized</code>. This signals to collaborators (and to yourself) that changes should be deliberate—if you rerun a finalized script, you should check that the outputs still match what went into the manuscript.</p>
<p>When a script is superseded, move it to <code>scripts/old/</code> and add a <code>deprecated_by</code> field pointing to its replacement:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Old Heatmaps"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">status</span><span class="kw">:</span><span class="at"> deprecated</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">deprecated_by</span><span class="kw">:</span><span class="at"> 06_improved_heatmaps.qmd</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This makes it clear which script replaced it, while Git preserves the full history. Don’t just delete old scripts if someone might want to reference them—the <code>old/</code> directory keeps them visible without cluttering the main listing.</p>
</section>
<section id="housekeeping" class="level2" data-number="5.10">
<h2 data-number="5.10" class="anchored" data-anchor-id="housekeeping"><span class="header-section-number">5.10</span> Keeping Things Clean</h2>
<section id="naming-conventions" class="level3" data-number="5.10.1">
<h3 data-number="5.10.1" class="anchored" data-anchor-id="naming-conventions"><span class="header-section-number">5.10.1</span> Naming Conventions</h3>
<p>Good file names are lowercase, descriptive, and use underscores:</p>
<ul>
<li><strong>Scripts</strong>: <code>01_import_qc.qmd</code>, not <code>01_Analysis.qmd</code> or <code>01 import qc.qmd</code></li>
<li><strong>Output files</strong>: <code>normalized_counts.rds</code>, not <code>data.rds</code> or <code>output.csv</code></li>
<li><strong>Multiple similar files</strong>: Use a consistent pattern like <code>volcano_3min.pdf</code>, <code>volcano_15min.pdf</code></li>
</ul>
<p>Avoid spaces (they cause problems in terminal commands), generic names (<code>results.csv</code>, <code>figure1.pdf</code>), and date prefixes on every file—let Git track versions instead.</p>
</section>
<section id="cross-language-data" class="level3" data-number="5.10.2">
<h3 data-number="5.10.2" class="anchored" data-anchor-id="cross-language-data"><span class="header-section-number">5.10.2</span> Cross-Language Data</h3>
<p>When data produced by an R script needs to be read by a Python script (or vice versa), use <strong>Parquet</strong> format. CSV files lose type information — a column of integers might be read back as strings, or dates might be misinterpreted. Parquet avoids this by storing column types alongside the data, so what you save is exactly what you read back. Parquet files are also smaller and faster to read than CSV in both languages.</p>
<p>In R, Parquet support comes from the <code>arrow</code> package. Install it with <code>renv::install("arrow")</code> if you haven’t already:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R: save as Parquet</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>arrow<span class="sc">::</span><span class="fu">write_parquet</span>(results, <span class="fu">file.path</span>(dir_out, <span class="st">"results.parquet"</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># R: read Parquet</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> arrow<span class="sc">::</span><span class="fu">read_parquet</span>(<span class="fu">here</span>(<span class="st">"outs/01_analysis/results.parquet"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python: save as Parquet</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>results.to_parquet(out_dir <span class="op">/</span> <span class="st">"results.parquet"</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Python: read Parquet</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> pd.read_parquet(PROJECT_ROOT <span class="op">/</span> <span class="st">"outs/01_analysis/results.parquet"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Within a single language, use native formats—<code>.rds</code> for R objects, <code>.pkl</code> for Python objects. Parquet is specifically for data that crosses the language boundary.</p>
</section>
<section id="helper-functions" class="level3" data-number="5.10.3">
<h3 data-number="5.10.3" class="anchored" data-anchor-id="helper-functions"><span class="header-section-number">5.10.3</span> Helper Functions</h3>
<p>When you find yourself copying the same function between scripts, move it to a shared location:</p>
<p><strong>Project-level helpers</strong> live in <code>R/</code> and <code>python/</code> at the project root:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In any script, load project helpers with:</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"R/gene_helpers.R"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In any script, load project helpers with:</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>sys.path.insert(<span class="dv">0</span>, <span class="bu">str</span>(PROJECT_ROOT <span class="op">/</span> <span class="st">"python"</span>))  <span class="co"># tell Python where to find your modules</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> gene_helpers <span class="im">import</span> normalize_name</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Python doesn’t automatically know to look in your project’s <code>python/</code> folder for modules — <code>sys.path.insert</code> adds that folder to the list of places Python searches when you <code>import</code> something. The R equivalent (<code>source()</code>) is simpler because it takes a direct file path.</p>
<p>Fix functions in place and let Git track the history—don’t version function names (<code>make_gene_short_v2</code>).</p>
<p><strong>Cross-project helpers</strong> go in <code>~/lib/R/</code> and <code>~/lib/python/</code>. When a project-level function proves useful across two or more projects, promote it to your personal library. This keeps project repositories clean while making reusable code accessible everywhere.</p>
</section>
<section id="version-control" class="level3" data-number="5.10.4">
<h3 data-number="5.10.4" class="anchored" data-anchor-id="version-control"><span class="header-section-number">5.10.4</span> Version Control</h3>
<p>Your <code>.gitignore</code> should generally include:</p>
<ul>
<li><code>outs/</code> — generated outputs can be regenerated from code</li>
<li><code>*_files/</code> and <code>.quarto/</code> — Quarto rendering artifacts</li>
<li><code>renv/library/</code> and <code>renv/staging/</code> — renv installs packages from the lock file</li>
<li><code>.DS_Store</code>, <code>.vscode/</code>, <code>.positron/</code> — OS and IDE files</li>
<li><code>.env</code>, <code>*.pem</code>, <code>credentials.json</code> — secrets</li>
</ul>
<p>Whether to commit <code>data/</code> depends on file sizes. Small data files (a few MB) can be committed so the project is self-contained. Large files should be gitignored, with a <code>data/README.md</code> documenting where to get them. The <a href="../part2/git-github.html">Git &amp; GitHub chapter</a> covers version control in detail, and <a href="../appendices/templates.html">Appendix C</a> has a complete <code>.gitignore</code> template.</p>
</section>
<section id="handling-old-versions" class="level3" data-number="5.10.5">
<h3 data-number="5.10.5" class="anchored" data-anchor-id="handling-old-versions"><span class="header-section-number">5.10.5</span> Handling Old Versions</h3>
<p>The preferred approach is to <strong>use Git</strong>—delete old files and recover them from history if needed. For deprecated scripts you want to keep visible, use <code>scripts/old/</code> with the <code>deprecated</code> status as described in <a href="#script-lifecycle">Script Lifecycle</a>. Only add dates to output subdirectories when you genuinely need multiple versions to coexist, like comparing runs with different parameters:</p>
<pre><code>outs/03_differential/
├── 2025-01-15_strict_threshold/
└── 2025-01-20_relaxed_threshold/</code></pre>
</section>
</section>
<section id="complete-example" class="level2" data-number="5.11">
<h2 data-number="5.11" class="anchored" data-anchor-id="complete-example"><span class="header-section-number">5.11</span> A Complete Example</h2>
<p>Here’s a well-organized phosphoproteomics project—the kind of structure you’d end up with after a few months of analysis:</p>
<pre><code>tryptamine_phospho/
├── .claude/
│   ├── CLAUDE.md
│   └── PHOSPHO_PLAN.md         # Planning doc tracking analysis progress
├── R/
│   └── gene_helpers.R
├── data/
│   ├── README.md               # Documents where each file came from
│   ├── raw_counts.csv          # From mass spec core
│   ├── sample_metadata.csv     # Experimental design
│   └── gene_annotations.tsv    # Downloaded from UniProt
├── scripts/
│   ├── 01_import_qc.qmd       # status: finalized
│   ├── 02_normalize.qmd       # status: finalized
│   ├── 03_differential.qmd    # status: finalized
│   ├── 04_volcano_plots.qmd   # status: development
│   ├── 05_heatmaps.qmd        # status: development
│   ├── exploratory/
│   │   └── test_new_clustering.qmd
│   └── old/
│       └── 04_volcano_v1.qmd  # status: deprecated, replaced by 04
├── outs/
│   ├── 01_import_qc/
│   │   ├── filtered_counts.rds
│   │   └── BUILD_INFO.txt
│   ├── 02_normalize/
│   │   ├── normalized_counts.rds
│   │   └── BUILD_INFO.txt
│   ├── 03_differential/
│   │   ├── limma_results.rds
│   │   ├── significant_hits.csv
│   │   └── BUILD_INFO.txt
│   ├── 04_volcano_plots/
│   │   ├── volcano_3min.pdf
│   │   └── volcano_15min.pdf
│   └── 05_heatmaps/
│       └── heatmap_all_clusters.pdf
├── environment.yml
├── renv.lock
├── .gitignore
└── README.md</code></pre>
<p>From this structure, anyone can understand the project without reading a single line of code:</p>
<ul>
<li><strong>Where did the data come from?</strong> Check <code>data/README.md</code>.</li>
<li><strong>What’s the analysis pipeline?</strong> Read the numbered scripts in order.</li>
<li><strong>Which script produced <code>limma_results.rds</code>?</strong> It’s in <code>outs/03_differential/</code>, so script 03 made it.</li>
<li><strong>Is the analysis finalized?</strong> Check the <code>status</code> field—scripts 01–03 are finalized, 04–05 are still in development.</li>
<li><strong>What code version produced these outputs?</strong> Check <code>BUILD_INFO.txt</code> in each output folder.</li>
<li><strong>How do I reproduce everything?</strong> Set up the environment (<code>environment.yml</code> + <code>renv.lock</code>), then run the scripts in order.</li>
</ul>
<div class="claude-callout callout callout-style-default callout-warning callout-titled" title="Claude Code">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Claude Code
</div>
</div>
<div class="callout-body-container callout-body">
<p>Claude Code can scaffold this entire structure for you and help maintain it as your project grows.</p>
<blockquote class="blockquote">
<p>I’m starting a new project analyzing RNA-seq data from three conditions with two time points. I’ll use R for the analysis. Can you set up the project?</p>
</blockquote>
<p>Claude will run <code>/new-project</code> to create the directory structure, initialize Git, set up renv, create a <code>.claude/CLAUDE.md</code>, and push to GitHub—all configured for your specific analysis.</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../part2/positron.html" class="pagination-link" aria-label="Positron">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Positron</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../part2/quarto.html" class="pagination-link" aria-label="Quarto">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quarto</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>